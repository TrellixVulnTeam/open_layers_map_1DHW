{"id":"UST7","dependencies":[{"name":"/Users/OKMG/Desktop/Work/open_layers_map/package.json","includedInParent":true,"mtime":1658712170300},{"name":"/Users/OKMG/Desktop/Work/open_layers_map/node_modules/ol/package.json","includedInParent":true,"mtime":1658712211657},{"name":"../../render/canvas/BuilderGroup.js","loc":{"line":17,"column":31},"parent":"/Users/OKMG/Desktop/Work/open_layers_map/node_modules/ol/renderer/canvas/VectorTileLayer.js","resolved":"/Users/OKMG/Desktop/Work/open_layers_map/node_modules/ol/render/canvas/BuilderGroup.js"},{"name":"../../render/canvas/ExecutorGroup.js","loc":{"line":18,"column":54},"parent":"/Users/OKMG/Desktop/Work/open_layers_map/node_modules/ol/renderer/canvas/VectorTileLayer.js","resolved":"/Users/OKMG/Desktop/Work/open_layers_map/node_modules/ol/render/canvas/ExecutorGroup.js"},{"name":"./TileLayer.js","loc":{"line":19,"column":36},"parent":"/Users/OKMG/Desktop/Work/open_layers_map/node_modules/ol/renderer/canvas/VectorTileLayer.js","resolved":"/Users/OKMG/Desktop/Work/open_layers_map/node_modules/ol/renderer/canvas/TileLayer.js"},{"name":"../../events/EventType.js","loc":{"line":20,"column":22},"parent":"/Users/OKMG/Desktop/Work/open_layers_map/node_modules/ol/renderer/canvas/VectorTileLayer.js","resolved":"/Users/OKMG/Desktop/Work/open_layers_map/node_modules/ol/events/EventType.js"},{"name":"../../render/canvas/BuilderType.js","loc":{"line":21,"column":23},"parent":"/Users/OKMG/Desktop/Work/open_layers_map/node_modules/ol/renderer/canvas/VectorTileLayer.js","resolved":"/Users/OKMG/Desktop/Work/open_layers_map/node_modules/ol/render/canvas/BuilderType.js"},{"name":"../../TileState.js","loc":{"line":22,"column":22},"parent":"/Users/OKMG/Desktop/Work/open_layers_map/node_modules/ol/renderer/canvas/VectorTileLayer.js","resolved":"/Users/OKMG/Desktop/Work/open_layers_map/node_modules/ol/TileState.js"},{"name":"../../layer/VectorTileRenderType.js","loc":{"line":23,"column":33},"parent":"/Users/OKMG/Desktop/Work/open_layers_map/node_modules/ol/renderer/canvas/VectorTileLayer.js","resolved":"/Users/OKMG/Desktop/Work/open_layers_map/node_modules/ol/layer/VectorTileRenderType.js"},{"name":"../../ViewHint.js","loc":{"line":24,"column":21},"parent":"/Users/OKMG/Desktop/Work/open_layers_map/node_modules/ol/renderer/canvas/VectorTileLayer.js","resolved":"/Users/OKMG/Desktop/Work/open_layers_map/node_modules/ol/ViewHint.js"},{"name":"../../transform.js","loc":{"line":25,"column":168},"parent":"/Users/OKMG/Desktop/Work/open_layers_map/node_modules/ol/renderer/canvas/VectorTileLayer.js","resolved":"/Users/OKMG/Desktop/Work/open_layers_map/node_modules/ol/transform.js"},{"name":"../../extent.js","loc":{"line":26,"column":109},"parent":"/Users/OKMG/Desktop/Work/open_layers_map/node_modules/ol/renderer/canvas/VectorTileLayer.js","resolved":"/Users/OKMG/Desktop/Work/open_layers_map/node_modules/ol/extent.js"},{"name":"../../obj.js","loc":{"line":27,"column":22},"parent":"/Users/OKMG/Desktop/Work/open_layers_map/node_modules/ol/renderer/canvas/VectorTileLayer.js","resolved":"/Users/OKMG/Desktop/Work/open_layers_map/node_modules/ol/obj.js"},{"name":"../../render/canvas/hitdetect.js","loc":{"line":28,"column":56},"parent":"/Users/OKMG/Desktop/Work/open_layers_map/node_modules/ol/renderer/canvas/VectorTileLayer.js","resolved":"/Users/OKMG/Desktop/Work/open_layers_map/node_modules/ol/render/canvas/hitdetect.js"},{"name":"../vector.js","loc":{"line":29,"column":81},"parent":"/Users/OKMG/Desktop/Work/open_layers_map/node_modules/ol/renderer/canvas/VectorTileLayer.js","resolved":"/Users/OKMG/Desktop/Work/open_layers_map/node_modules/ol/renderer/vector.js"},{"name":"../../util.js","loc":{"line":30,"column":23},"parent":"/Users/OKMG/Desktop/Work/open_layers_map/node_modules/ol/renderer/canvas/VectorTileLayer.js","resolved":"/Users/OKMG/Desktop/Work/open_layers_map/node_modules/ol/util.js"},{"name":"../../events.js","loc":{"line":31,"column":38},"parent":"/Users/OKMG/Desktop/Work/open_layers_map/node_modules/ol/renderer/canvas/VectorTileLayer.js","resolved":"/Users/OKMG/Desktop/Work/open_layers_map/node_modules/ol/events.js"},{"name":"../../size.js","loc":{"line":32,"column":23},"parent":"/Users/OKMG/Desktop/Work/open_layers_map/node_modules/ol/renderer/canvas/VectorTileLayer.js","resolved":"/Users/OKMG/Desktop/Work/open_layers_map/node_modules/ol/size.js"},{"name":"../../coordinate.js","loc":{"line":33,"column":22},"parent":"/Users/OKMG/Desktop/Work/open_layers_map/node_modules/ol/renderer/canvas/VectorTileLayer.js","resolved":"/Users/OKMG/Desktop/Work/open_layers_map/node_modules/ol/coordinate.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.default=void 0;var e=R(require(\"../../render/canvas/BuilderGroup.js\")),t=y(require(\"../../render/canvas/ExecutorGroup.js\")),r=R(require(\"./TileLayer.js\")),i=R(require(\"../../events/EventType.js\")),n=R(require(\"../../render/canvas/BuilderType.js\")),o=R(require(\"../../TileState.js\")),a=R(require(\"../../layer/VectorTileRenderType.js\")),d=R(require(\"../../ViewHint.js\")),l=require(\"../../transform.js\"),u=require(\"../../extent.js\"),s=require(\"../../obj.js\"),g=require(\"../../render/canvas/hitdetect.js\"),c=require(\"../vector.js\"),f=require(\"../../util.js\"),p=require(\"../../events.js\"),h=require(\"../../size.js\"),T=require(\"../../coordinate.js\");function v(e){if(\"function\"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(v=function(e){return e?r:t})(e)}function y(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||\"object\"!=typeof e&&\"function\"!=typeof e)return{default:e};var r=v(t);if(r&&r.has(e))return r.get(e);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(\"default\"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=n?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(i,o,a):i[o]=e[o]}return i.default=e,r&&r.set(e,i),i}function R(e){return e&&e.__esModule?e:{default:e}}var _=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function i(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),m={image:[n.default.POLYGON,n.default.CIRCLE,n.default.LINE_STRING,n.default.IMAGE,n.default.TEXT],hybrid:[n.default.POLYGON,n.default.LINE_STRING],vector:[]},C={image:[n.default.DEFAULT],hybrid:[n.default.IMAGE,n.default.TEXT,n.default.DEFAULT],vector:[n.default.POLYGON,n.default.CIRCLE,n.default.LINE_STRING,n.default.IMAGE,n.default.TEXT,n.default.DEFAULT]},I=function(r){function n(e){var t=r.call(this,e)||this;return t.boundHandleStyleImageChange_=t.handleStyleImageChange_.bind(t),t.dirty_=!1,t.renderedLayerRevision_,t.renderedPixelToCoordinateTransform_=null,t.renderedRotation_,t.renderTileImageQueue_={},t.tileListenerKeys_={},t.tmpTransform_=(0,l.create)(),t}return _(n,r),n.prototype.prepareTile=function(e,t,r,i){var n,a=(0,f.getUid)(e),d=e.getState();return(d===o.default.LOADED&&e.hifi||d===o.default.ERROR)&&a in this.tileListenerKeys_&&((0,p.unlistenByKey)(this.tileListenerKeys_[a]),delete this.tileListenerKeys_[a]),d!==o.default.LOADED&&d!==o.default.ERROR||(this.updateExecutorGroup_(e,t,r),this.tileImageNeedsRender_(e,t,r)&&(n=!0,i&&(this.renderTileImageQueue_[a]=e))),n},n.prototype.getTile=function(e,t,n,l){var u=l.pixelRatio,s=l.viewState,g=s.resolution,c=s.projection,h=this.getLayer(),T=h.getSource().getTile(e,t,n,u,c);if(T.getState()<o.default.LOADED){T.wantedResolution=g;var v=(0,f.getUid)(T);if(!(v in this.tileListenerKeys_)){var y=(0,p.listen)(T,i.default.CHANGE,this.prepareTile.bind(this,T,u,c,!0));this.tileListenerKeys_[v]=y}}else{var R=l.viewHints;!!(R[d.default.ANIMATING]||R[d.default.INTERACTING])&&T.wantedResolution||(T.wantedResolution=g),this.prepareTile(T,u,c,!1)&&h.getRenderMode()!==a.default.VECTOR&&this.renderTileImage_(T,l)}return r.prototype.getTile.call(this,e,t,n,l)},n.prototype.isDrawableTile=function(e){var t=this.getLayer();return r.prototype.isDrawableTile.call(this,e)&&(t.getRenderMode()===a.default.VECTOR?(0,f.getUid)(t)in e.executorGroups:e.hasContext(t))},n.prototype.getTileImage=function(e){return e.getImage(this.getLayer())},n.prototype.prepareFrame=function(e){var t=this.getLayer().getRevision();return this.renderedLayerRevision_!=t&&(this.renderedTiles.length=0),this.renderedLayerRevision_=t,r.prototype.prepareFrame.call(this,e)},n.prototype.updateExecutorGroup_=function(r,i,n){var d=this.getLayer(),l=d.getRevision(),s=d.getRenderOrder()||null,g=r.wantedResolution,p=r.getReplayState(d);if(p.dirty||p.renderedResolution!==g||p.renderedRevision!=l||p.renderedRenderOrder!=s||p.renderedZ!==r.sourceZ){var h=d.getSource(),T=h.getTileGrid(),v=h.getTileGridForProjection(n).getTileCoordExtent(r.wrappedTileCoord),y=h.getSourceTiles(i,n,r),R=(0,f.getUid)(d);delete r.hitDetectionImageData[R],r.executorGroups[R]=[];for(var _=function(n,l){var f=y[n];if(f.getState()!=o.default.LOADED)return\"continue\";var _=f.tileCoord,C=T.getTileCoordExtent(_),I=(0,u.getIntersection)(v,C),E=(0,u.equals)(C,I)?null:(0,u.buffer)(I,d.getRenderBuffer()*g,m.tmpExtent);p.dirty=!1;var x=new e.default(0,I,g,i,d.getDeclutter()),S=(0,c.getSquaredTolerance)(g,i),w=function(e){var t,r=e.getStyleFunction()||d.getStyleFunction();if(r&&(t=r(e,g)),t){var i=this.renderFeature(e,S,t,x);this.dirty_=this.dirty_||i,p.dirty=p.dirty||i}},L=f.getFeatures();s&&s!==p.renderedRenderOrder&&L.sort(s);for(var j=0,O=L.length;j<O;++j){var D=L[j];E&&!(0,u.intersects)(E,D.getGeometry().getExtent())||w.call(m,D)}var G=x.finish(),A=d.getRenderMode()!==a.default.VECTOR&&d.getDeclutter()&&1===y.length?null:I,F=new t.default(A,g,i,h.getOverlaps(),G,d.getRenderBuffer());r.executorGroups[R].push(F)},m=this,C=0,I=y.length;C<I;++C)_(C);p.renderedRevision=l,p.renderedZ=r.sourceZ,p.renderedRenderOrder=s,p.renderedResolution=g}},n.prototype.forEachFeatureAtCoordinate=function(e,t,r,i,n){var o=t.viewState.resolution,a=t.viewState.rotation;r=null==r?0:r;var d,l,s,g=this.getLayer(),c=g.getDeclutter(),p=g.getSource().getTileGridForProjection(t.viewState.projection),h={},T=this.renderedTiles,v=function(){var t=T[l],s=p.getTileCoordExtent(t.wrappedTileCoord),v=(0,u.containsCoordinate)(s,e);if(!c&&!v)return\"continue\";for(var y=t.executorGroups[(0,f.getUid)(g)],R=0,_=y.length;R<_;++R){var m=y[R];d=d||m.forEachFeatureAtCoordinate(e,o,a,r,function(e){if(v||n&&-1!==n.indexOf(e)){var t=e.getId();if(void 0===t&&(t=(0,f.getUid)(e)),!(t in h))return h[t]=!0,i(e,g)}},g.getDeclutter()?n:null)}};for(l=0,s=T.length;l<s;++l)v();return d},n.prototype.getFeatures=function(e){return new Promise(function(t,r){for(var i,n=this.getLayer(),a=(0,f.getUid)(n),d=n.getSource(),s=this.renderedProjection,c=s.getExtent(),p=this.renderedResolution,v=d.getTileGridForProjection(s),y=(0,l.apply)(this.renderedPixelToCoordinateTransform_,e.slice()),R=v.getTileCoordForCoordAndResolution(y,p),_=0,m=this.renderedTiles.length;_<m;++_)if(R.toString()===this.renderedTiles[_].tileCoord.toString()){if((i=this.renderedTiles[_]).getState()===o.default.LOADED&&i.hifi){var C=v.getTileCoordExtent(i.tileCoord);d.getWrapX()&&s.canWrapX()&&!(0,u.containsExtent)(c,C)&&(0,T.wrapX)(y,s);break}i=void 0}if(!i||i.loadingSourceTiles>0)t([]);else{var I=v.getTileCoordExtent(i.wrappedTileCoord),E=(0,u.getTopLeft)(I),x=[(y[0]-E[0])/p,(E[1]-y[1])/p],S=i.getSourceTiles().reduce(function(e,t){return e.concat(t.getFeatures())},[]),w=i.hitDetectionImageData[a];if(!w&&!this.animatingOrInteracting_){var L=(0,h.toSize)(v.getTileSize(v.getZForResolution(p))),j=[L[0]/2,L[1]/2],O=this.renderedRotation_,D=[this.getRenderTransform(v.getTileCoordCenter(i.wrappedTileCoord),p,0,.5,j[0],j[1],0)];w=(0,g.createHitDetectionImageData)(L,D,S,n.getStyleFunction(),v.getTileCoordExtent(i.wrappedTileCoord),i.getReplayState(n).renderedResolution,O),i.hitDetectionImageData[a]=w}t((0,g.hitDetect)(x,S,w))}}.bind(this))},n.prototype.handleFontsChanged=function(){(0,s.clear)(this.renderTileImageQueue_);var e=this.getLayer();e.getVisible()&&void 0!==this.renderedLayerRevision_&&e.changed()},n.prototype.handleStyleImageChange_=function(e){this.renderIfReadyAndVisible()},n.prototype.renderFrame=function(e,i){var n=e.viewHints,o=!(n[d.default.ANIMATING]||n[d.default.INTERACTING]);this.renderQueuedTileImages_(o,e),r.prototype.renderFrame.call(this,e,i),this.renderedPixelToCoordinateTransform_=e.pixelToCoordinateTransform.slice(),this.renderedRotation_=e.viewState.rotation;var u=this.getLayer(),s=u.getRenderMode();if(s===a.default.IMAGE)return this.container;var g=u.getSource(),c=e.usedTiles[(0,f.getUid)(g)];for(var p in this.renderTileImageQueue_)c&&p in c||delete this.renderTileImageQueue_[p];for(var h=this.context,T=u.getDeclutter()?{}:null,v=C[s],y=e.pixelRatio,R=e.viewState,_=R.center,m=R.resolution,I=R.rotation,E=e.size,x=Math.round(E[0]*y),S=Math.round(E[1]*y),w=this.renderedTiles,L=g.getTileGridForProjection(e.viewState.projection),j=[],O=[],D=w.length-1;D>=0;--D)for(var G=w[D],A=G.tileCoord,F=L.getTileCoordExtent(G.wrappedTileCoord),b=L.getTileCoordExtent(A,this.tmpExtent)[0]-F[0],P=(0,l.multiply)((0,l.scale)(this.inversePixelTransform.slice(),1/y,1/y),this.getRenderTransform(_,m,I,y,x,S,b)),M=G.executorGroups[(0,f.getUid)(u)],N=!1,q=0,U=M.length;q<U;++q){var Q=M[q];if(Q.hasExecutors(v)){var Z=G.tileCoord[0],H=void 0;if(!T&&!N){H=Q.getClipCoords(P),h.save();for(var K=0,V=j.length;K<V;++K){var X=j[K];Z<O[K]&&(h.beginPath(),h.moveTo(H[0],H[1]),h.lineTo(H[2],H[3]),h.lineTo(H[4],H[5]),h.lineTo(H[6],H[7]),h.moveTo(X[6],X[7]),h.lineTo(X[4],X[5]),h.lineTo(X[2],X[3]),h.lineTo(X[0],X[1]),h.clip())}}Q.execute(h,1,P,I,o,v,T),T||N||(h.restore(),j.push(H),O.push(Z),N=!0)}}if(T){var k=e.layerStatesArray[e.layerIndex];(0,t.replayDeclutter)(T,h,I,k.opacity,o,e.declutterItems)}return this.container},n.prototype.renderQueuedTileImages_=function(e,t){for(var r in this.renderTileImageQueue_){if(!e&&Date.now()-t.time>8){t.animate=!0;break}var i=this.renderTileImageQueue_[r];delete this.renderTileImageQueue_[r],this.renderTileImage_(i,t)}},n.prototype.renderFeature=function(e,t,r,i){if(!r)return!1;var n=!1;if(Array.isArray(r))for(var o=0,a=r.length;o<a;++o)n=(0,c.renderFeature)(i,e,r[o],t,this.boundHandleStyleImageChange_)||n;else n=(0,c.renderFeature)(i,e,r,t,this.boundHandleStyleImageChange_);return n},n.prototype.tileImageNeedsRender_=function(e,t,r){var i=this.getLayer(),n=e.getReplayState(i),o=i.getRevision(),a=e.sourceZ,d=e.wantedResolution;return n.renderedTileResolution!==d||n.renderedTileRevision!==o||n.renderedTileZ!==a},n.prototype.renderTileImage_=function(e,t){var r=this.getLayer(),i=e.getReplayState(r),n=r.getRevision(),o=e.executorGroups[(0,f.getUid)(r)];i.renderedTileRevision=n,i.renderedTileZ=e.sourceZ;var a=e.wrappedTileCoord,d=a[0],u=r.getSource(),s=t.pixelRatio,g=t.viewState.projection,c=u.getTileGridForProjection(g),p=c.getResolution(e.tileCoord[0]),h=t.pixelRatio/e.wantedResolution*p,T=c.getResolution(d),v=e.getContext(r);s=Math.max(s,h/s);var y=u.getTilePixelSize(d,s,g);v.canvas.width=y[0],v.canvas.height=y[1];var R=s/h;if(1!==R){var _=(0,l.reset)(this.tmpTransform_);(0,l.scale)(_,R,R),v.setTransform.apply(v,_)}var C=c.getTileCoordExtent(a,this.tmpExtent),I=h/T,E=(0,l.reset)(this.tmpTransform_);(0,l.scale)(E,I,-I),(0,l.translate)(E,-C[0],-C[3]);for(var x=0,S=o.length;x<S;++x){o[x].execute(v,R,E,0,!0,m[r.getRenderMode()])}i.renderedTileResolution=e.wantedResolution},n}(r.default),E=I;exports.default=E;"},"sourceMaps":null,"error":null,"hash":"0138a9b6ceadbf02960260df038c3d2c","cacheData":{"env":{}}}