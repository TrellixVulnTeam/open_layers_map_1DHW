{"id":"w1WE","dependencies":[{"name":"/Users/OKMG/Desktop/Work/open_layers_map/package.json","includedInParent":true,"mtime":1658712170300},{"name":"/Users/OKMG/Desktop/Work/open_layers_map/node_modules/ol/package.json","includedInParent":true,"mtime":1658712211657},{"name":"../webgl/ContextEventType.js","loc":{"line":17,"column":29},"parent":"/Users/OKMG/Desktop/Work/open_layers_map/node_modules/ol/webgl/Helper.js","resolved":"/Users/OKMG/Desktop/Work/open_layers_map/node_modules/ol/webgl/ContextEventType.js"},{"name":"../Disposable.js","loc":{"line":18,"column":23},"parent":"/Users/OKMG/Desktop/Work/open_layers_map/node_modules/ol/webgl/Helper.js","resolved":"/Users/OKMG/Desktop/Work/open_layers_map/node_modules/ol/Disposable.js"},{"name":"./PostProcessingPass.js","loc":{"line":19,"column":36},"parent":"/Users/OKMG/Desktop/Work/open_layers_map/node_modules/ol/webgl/Helper.js","resolved":"/Users/OKMG/Desktop/Work/open_layers_map/node_modules/ol/webgl/PostProcessingPass.js"},{"name":"../webgl.js","loc":{"line":20,"column":104},"parent":"/Users/OKMG/Desktop/Work/open_layers_map/node_modules/ol/webgl/Helper.js","resolved":"/Users/OKMG/Desktop/Work/open_layers_map/node_modules/ol/webgl.js"},{"name":"../asserts.js","loc":{"line":21,"column":23},"parent":"/Users/OKMG/Desktop/Work/open_layers_map/node_modules/ol/webgl/Helper.js","resolved":"/Users/OKMG/Desktop/Work/open_layers_map/node_modules/ol/asserts.js"},{"name":"../obj.js","loc":{"line":22,"column":22},"parent":"/Users/OKMG/Desktop/Work/open_layers_map/node_modules/ol/webgl/Helper.js","resolved":"/Users/OKMG/Desktop/Work/open_layers_map/node_modules/ol/obj.js"},{"name":"../transform.js","loc":{"line":23,"column":149},"parent":"/Users/OKMG/Desktop/Work/open_layers_map/node_modules/ol/webgl/Helper.js","resolved":"/Users/OKMG/Desktop/Work/open_layers_map/node_modules/ol/transform.js"},{"name":"../vec/mat4.js","loc":{"line":24,"column":38},"parent":"/Users/OKMG/Desktop/Work/open_layers_map/node_modules/ol/webgl/Helper.js","resolved":"/Users/OKMG/Desktop/Work/open_layers_map/node_modules/ol/vec/mat4.js"},{"name":"../util.js","loc":{"line":25,"column":23},"parent":"/Users/OKMG/Desktop/Work/open_layers_map/node_modules/ol/webgl/Helper.js","resolved":"/Users/OKMG/Desktop/Work/open_layers_map/node_modules/ol/util.js"},{"name":"../array.js","loc":{"line":26,"column":25},"parent":"/Users/OKMG/Desktop/Work/open_layers_map/node_modules/ol/webgl/Helper.js","resolved":"/Users/OKMG/Desktop/Work/open_layers_map/node_modules/ol/array.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.computeAttributesStride=m,exports.default=exports.AttributeType=exports.DefaultUniform=exports.ShaderType=void 0;var e=_(require(\"../webgl/ContextEventType.js\")),t=_(require(\"../Disposable.js\")),r=_(require(\"./PostProcessingPass.js\")),o=require(\"../webgl.js\"),a=require(\"../asserts.js\"),i=require(\"../obj.js\"),n=require(\"../transform.js\"),s=require(\"../vec/mat4.js\"),u=require(\"../util.js\"),f=require(\"../array.js\");function _(e){return e&&e.__esModule?e:{default:e}}var c=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function o(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),l={FRAGMENT_SHADER:35632,VERTEX_SHADER:35633};exports.ShaderType=l;var E={PROJECTION_MATRIX:\"u_projectionMatrix\",OFFSET_SCALE_MATRIX:\"u_offsetScaleMatrix\",OFFSET_ROTATION_MATRIX:\"u_offsetRotateMatrix\",TIME:\"u_time\",ZOOM:\"u_zoom\",RESOLUTION:\"u_resolution\"};exports.DefaultUniform=E;var h={UNSIGNED_BYTE:o.UNSIGNED_BYTE,UNSIGNED_SHORT:o.UNSIGNED_SHORT,UNSIGNED_INT:o.UNSIGNED_INT,FLOAT:o.FLOAT};exports.AttributeType=h;var p=function(t){function _(i){var u=t.call(this)||this,_=i||{};u.boundHandleWebGLContextLost_=u.handleWebGLContextLost.bind(u),u.boundHandleWebGLContextRestored_=u.handleWebGLContextRestored.bind(u),u.canvas_=document.createElement(\"canvas\"),u.canvas_.style.position=\"absolute\",u.canvas_.style.left=\"0\",u.gl_=(0,o.getContext)(u.canvas_);var c=u.getGL();if(u.bufferCache_={},u.currentProgram_=null,(0,a.assert)((0,f.includes)((0,o.getSupportedExtensions)(),\"OES_element_index_uint\"),63),c.getExtension(\"OES_element_index_uint\"),u.canvas_.addEventListener(e.default.LOST,u.boundHandleWebGLContextLost_),u.canvas_.addEventListener(e.default.RESTORED,u.boundHandleWebGLContextRestored_),u.offsetRotateMatrix_=(0,n.create)(),u.offsetScaleMatrix_=(0,n.create)(),u.tmpMat4_=(0,s.create)(),u.uniformLocations_={},u.attribLocations_={},u.uniforms_=[],_.uniforms)for(var l in _.uniforms)u.uniforms_.push({name:l,value:_.uniforms[l]});return u.postProcessPasses_=_.postProcesses?_.postProcesses.map(function(e){return new r.default({webGlContext:c,scaleRatio:e.scaleRatio,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader,uniforms:e.uniforms})}):[new r.default({webGlContext:c})],u.shaderCompileErrors_=null,u.startTime_=Date.now(),u}return c(_,t),_.prototype.bindBuffer=function(e){var t=this.getGL(),r=(0,u.getUid)(e),o=this.bufferCache_[r];o||(o={buffer:e,webGlBuffer:t.createBuffer()},this.bufferCache_[r]=o);t.bindBuffer(e.getType(),o.webGlBuffer)},_.prototype.flushBufferData=function(e){var t=this.getGL();this.bindBuffer(e),t.bufferData(e.getType(),e.getArray(),e.getUsage())},_.prototype.deleteBuffer=function(e){var t=this.getGL(),r=(0,u.getUid)(e),o=this.bufferCache_[r];t.isContextLost()||t.deleteBuffer(o.buffer),delete this.bufferCache_[r]},_.prototype.disposeInternal=function(){this.canvas_.removeEventListener(e.default.LOST,this.boundHandleWebGLContextLost_),this.canvas_.removeEventListener(e.default.RESTORED,this.boundHandleWebGLContextRestored_)},_.prototype.prepareDraw=function(e){var t=this.getGL(),r=this.getCanvas(),o=e.size,a=e.pixelRatio;r.width=o[0]*a,r.height=o[1]*a,r.style.width=o[0]+\"px\",r.style.height=o[1]+\"px\",t.useProgram(this.currentProgram_);for(var i=this.postProcessPasses_.length-1;i>=0;i--)this.postProcessPasses_[i].init(e);t.bindTexture(t.TEXTURE_2D,null),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT),t.enable(t.BLEND),t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA),t.useProgram(this.currentProgram_),this.applyFrameState(e),this.applyUniforms(e)},_.prototype.prepareDrawToRenderTarget=function(e,t,r){var o=this.getGL(),a=t.getSize();o.bindFramebuffer(o.FRAMEBUFFER,t.getFramebuffer()),o.viewport(0,0,a[0],a[1]),o.bindTexture(o.TEXTURE_2D,t.getTexture()),o.clearColor(0,0,0,0),o.clear(o.COLOR_BUFFER_BIT),o.enable(o.BLEND),o.blendFunc(o.ONE,r?o.ZERO:o.ONE_MINUS_SRC_ALPHA),o.useProgram(this.currentProgram_),this.applyFrameState(e),this.applyUniforms(e)},_.prototype.drawElements=function(e,t){var r=this.getGL(),o=r.UNSIGNED_INT,a=t-e,i=4*e;r.drawElements(r.TRIANGLES,a,o,i)},_.prototype.finalizeDraw=function(e){for(var t=0;t<this.postProcessPasses_.length;t++)this.postProcessPasses_[t].apply(e,this.postProcessPasses_[t+1]||null)},_.prototype.getCanvas=function(){return this.canvas_},_.prototype.getGL=function(){return this.gl_},_.prototype.applyFrameState=function(e){var t=e.size,r=e.viewState.rotation,o=(0,n.reset)(this.offsetScaleMatrix_);(0,n.scale)(o,2/t[0],2/t[1]);var a=(0,n.reset)(this.offsetRotateMatrix_);0!==r&&(0,n.rotate)(a,-r),this.setUniformMatrixValue(E.OFFSET_SCALE_MATRIX,(0,s.fromTransform)(this.tmpMat4_,o)),this.setUniformMatrixValue(E.OFFSET_ROTATION_MATRIX,(0,s.fromTransform)(this.tmpMat4_,a)),this.setUniformFloatValue(E.TIME,.001*(Date.now()-this.startTime_)),this.setUniformFloatValue(E.ZOOM,e.viewState.zoom),this.setUniformFloatValue(E.RESOLUTION,e.viewState.resolution)},_.prototype.applyUniforms=function(e){var t,r=this.getGL(),o=0;this.uniforms_.forEach(function(a){if((t=\"function\"==typeof a.value?a.value(e):a.value)instanceof HTMLCanvasElement||t instanceof HTMLImageElement||t instanceof ImageData)a.texture||(a.prevValue=void 0,a.texture=r.createTexture()),r.activeTexture(r[\"TEXTURE\"+o]),r.bindTexture(r.TEXTURE_2D,a.texture),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),(!(t instanceof HTMLImageElement)||t.complete)&&a.prevValue!==t&&(a.prevValue=t,r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,t)),r.uniform1i(this.getUniformLocation(a.name),o++);else if(Array.isArray(t)&&6===t.length)this.setUniformMatrixValue(a.name,(0,s.fromTransform)(this.tmpMat4_,t));else if(Array.isArray(t)&&t.length<=4)switch(t.length){case 2:return void r.uniform2f(this.getUniformLocation(a.name),t[0],t[1]);case 3:return void r.uniform3f(this.getUniformLocation(a.name),t[0],t[1],t[2]);case 4:return void r.uniform4f(this.getUniformLocation(a.name),t[0],t[1],t[2],t[3]);default:return}else\"number\"==typeof t&&r.uniform1f(this.getUniformLocation(a.name),t)}.bind(this))},_.prototype.useProgram=function(e){return e!=this.currentProgram_&&(this.getGL().useProgram(e),this.currentProgram_=e,this.uniformLocations_={},this.attribLocations_={},!0)},_.prototype.compileShader=function(e,t){var r=this.getGL(),o=r.createShader(t);return r.shaderSource(o,e),r.compileShader(o),o},_.prototype.getProgram=function(e,t){var r=this.getGL(),o=this.compileShader(e,r.FRAGMENT_SHADER),a=this.compileShader(t,r.VERTEX_SHADER);this.shaderCompileErrors_=null,r.getShaderInfoLog(o)&&(this.shaderCompileErrors_=\"Fragment shader compilation failed:\\n\"+r.getShaderInfoLog(o)),r.getShaderInfoLog(a)&&(this.shaderCompileErrors_=(this.shaderCompileErrors_||\"\")+\"Vertex shader compilation failed:\\n\"+r.getShaderInfoLog(a));var i=r.createProgram();return r.attachShader(i,o),r.attachShader(i,a),r.linkProgram(i),i},_.prototype.getShaderCompileErrors=function(){return this.shaderCompileErrors_},_.prototype.getUniformLocation=function(e){return void 0===this.uniformLocations_[e]&&(this.uniformLocations_[e]=this.getGL().getUniformLocation(this.currentProgram_,e)),this.uniformLocations_[e]},_.prototype.getAttributeLocation=function(e){return void 0===this.attribLocations_[e]&&(this.attribLocations_[e]=this.getGL().getAttribLocation(this.currentProgram_,e)),this.attribLocations_[e]},_.prototype.makeProjectionTransform=function(e,t){var r=e.size,o=e.viewState.rotation,a=e.viewState.resolution,i=e.viewState.center;return(0,n.reset)(t),(0,n.compose)(t,0,0,2/(a*r[0]),2/(a*r[1]),-o,-i[0],-i[1]),t},_.prototype.setUniformFloatValue=function(e,t){this.getGL().uniform1f(this.getUniformLocation(e),t)},_.prototype.setUniformMatrixValue=function(e,t){this.getGL().uniformMatrix4fv(this.getUniformLocation(e),!1,t)},_.prototype.enableAttributeArray_=function(e,t,r,o,a){var i=this.getAttributeLocation(e);i<0||(this.getGL().enableVertexAttribArray(i),this.getGL().vertexAttribPointer(i,t,r,!1,o,a))},_.prototype.enableAttributes=function(e){for(var t=m(e),r=0,a=0;a<e.length;a++){var i=e[a];this.enableAttributeArray_(i.name,i.size,i.type||o.FLOAT,t,r),r+=i.size*T(i.type)}},_.prototype.handleWebGLContextLost=function(){(0,i.clear)(this.bufferCache_),this.currentProgram_=null},_.prototype.handleWebGLContextRestored=function(){},_.prototype.createTexture=function(e,t,r){var o=this.getGL(),a=r||o.createTexture(),i=o.RGBA,n=o.RGBA,s=o.UNSIGNED_BYTE;return o.bindTexture(o.TEXTURE_2D,a),t?o.texImage2D(o.TEXTURE_2D,0,i,n,s,t):o.texImage2D(o.TEXTURE_2D,0,i,e[0],e[1],0,n,s,null),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.LINEAR),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE),a},_}(t.default);function m(e){for(var t=0,r=0;r<e.length;r++){var o=e[r];t+=o.size*T(o.type)}return t}function T(e){switch(e){case h.UNSIGNED_BYTE:return Uint8Array.BYTES_PER_ELEMENT;case h.UNSIGNED_SHORT:return Uint16Array.BYTES_PER_ELEMENT;case h.UNSIGNED_INT:return Uint32Array.BYTES_PER_ELEMENT;case h.FLOAT:default:return Float32Array.BYTES_PER_ELEMENT}}var d=p;exports.default=d;"},"sourceMaps":null,"error":null,"hash":"3b8f108794505f5181c0295c198e7440","cacheData":{"env":{}}}